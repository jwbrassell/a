{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">Home</a></li>
<li class="breadcrumb-item active">Admin Dashboard</li>
{% endblock %}

{# Import components #}
{% from 'admin/components/shared_styles.html' import admin_styles %}
{% from 'admin/components/stat_card.html' import stat_card %}
{% from 'admin/components/activity_list.html' import activity_list %}
{% from 'admin/components/role_list.html' import role_list %}
{% from 'admin/components/system_charts.html' import system_health_chart, resource_usage_chart, charts_scripts %}
{% from 'admin/components/quick_actions.html' import quick_actions %}

{% block styles %}
{{ super() }}
{{ admin_styles() }}
{% endblock %}

{% block page_content %}
<!-- Statistics Cards -->
<div class="row">
    <div class="col-lg-3 col-md-6">
        {{ stat_card(
            title="Total Users",
            value=stats.users.total,
            icon="fa-users",
            color_class="stat-users",
            progress_value=(stats.users.active / stats.users.total * 100) if stats.users.total > 0 else 0,
            progress_label=stats.users.active|string + " Active Users"
        ) }}
    </div>

    <div class="col-lg-3 col-md-6">
        {{ stat_card(
            title="Total Roles",
            value=stats.roles.total,
            icon="fa-user-shield",
            color_class="stat-roles",
            progress_value=(stats.roles.with_users / stats.roles.total * 100) if stats.roles.total > 0 else 0,
            progress_label=stats.roles.with_users|string + " Roles with Users"
        ) }}
    </div>

    <div class="col-lg-3 col-md-6">
        {{ stat_card(
            title="Categories",
            value=stats.categories.total,
            icon="fa-folder",
            color_class="stat-categories",
            progress_value=(stats.categories.with_routes / stats.categories.total * 100) if stats.categories.total > 0 else 0,
            progress_label=stats.categories.with_routes|string + " Categories with Routes"
        ) }}
    </div>

    <div class="col-lg-3 col-md-6">
        {{ stat_card(
            title="Routes",
            value=stats.routes.total,
            icon="fa-route",
            color_class="stat-routes",
            progress_value=(stats.routes.categorized / stats.routes.total * 100) if stats.routes.total > 0 else 0,
            progress_label=stats.routes.categorized|string + " Categorized Routes"
        ) }}
    </div>
</div>

<!-- System Health & Activity -->
<div class="row mt-4">
    <div class="col-md-8">
        {{ system_health_chart() }}
    </div>
    <div class="col-md-4">
        {{ resource_usage_chart() }}
    </div>
</div>

<!-- Recent Activity and Role Stats -->
<div class="row mt-4">
    <div class="col-md-6">
        {{ activity_list(recent_activities[:5]) }}
    </div>
    <div class="col-md-6">
        {{ role_list(role_stats.top_roles) }}
    </div>
</div>

<!-- Quick Action Buttons -->
{{ quick_actions() }}
{% endblock %}

{% block scripts %}
{{ super() }}
{{ charts_scripts() }}
{% endblock %}
