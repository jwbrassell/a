<!-- CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='src/bootstrap/css/bootstrap.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/fontawesome/css/all.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='dist/css/adminlte.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/css/theme.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='datatables.css') }}" type="text/css">
<link rel="stylesheet" href="{{ url_for('static', filename='src/datatables/css/responsive.bootstrap4.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/datatables/css/buttons.bootstrap4.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/bootstrap-slider/css/bootstrap-slider.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/bootstrap-switch/css/bootstrap3/bootstrap-switch.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/bootstrap4-duallistbox/bootstrap-duallistbox.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/select2/select2.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/select2-bootstrap4-theme/select2-bootstrap4.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/sweetalert2/sweetalert2.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='src/toastr/toastr.min.css') }}">

<!-- Core JavaScript -->
<script src="{{ url_for('static', filename='src/jquery/js/jquery-3.6.0.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ url_for('static', filename='dist/js/adminlte.min.js') }}"></script>

<!-- DataTables Core -->
<script src="{{ url_for('static', filename='src/datatables/js/jquery.dataTables.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/dataTables.bootstrap4.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/dataTables.responsive.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/responsive.bootstrap4.min.js') }}"></script>

<!-- DataTables Buttons -->
<script src="{{ url_for('static', filename='src/datatables/js/dataTables.buttons.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/buttons.bootstrap4.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/jszip/jszip.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/pdfmake/pdfmake.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/pdfmake/vfs_fonts.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/buttons.html5.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/buttons.print.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/datatables/js/buttons.colVis.min.js') }}"></script>

<!-- Highcharts Core -->
<script src="{{ url_for('static', filename='src/highcharts/highcharts.js') }}"></script>
<script src="{{ url_for('static', filename='src/highcharts/highcharts-more.js') }}"></script>

<!-- Highcharts Modules -->
<script src="{{ url_for('static', filename='src/highcharts/modules/data.js') }}"></script>
<script src="{{ url_for('static', filename='src/highcharts/modules/exporting.js') }}"></script>
<script src="{{ url_for('static', filename='src/highcharts/modules/export-data.js') }}"></script>
<script src="{{ url_for('static', filename='src/highcharts/modules/accessibility.js') }}"></script>

<!-- Other Libraries -->
<script src="{{ url_for('static', filename='src/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/bootstrap-slider/js/bootstrap-slider.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/bootstrap-switch/js/bootstrap-switch.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/select2/select2.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/sweetalert2/sweetalert2.all.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/toastr/toastr.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/sortablejs/Sortable.min.js') }}"></script>
<script src="{{ url_for('static', filename='src/tinymce/tinymce/js/tinymce/tinymce.min.js') }}"></script>

<!-- Navigation -->
<script src="{{ url_for('static', filename='src/js/navigation.js') }}"></script>

<!-- Project Scripts -->
{% if request.endpoint and request.endpoint.startswith('projects.') %}
<script src="{{ url_for('projects.static', filename='js/project.js') }}"></script>
{% endif %}

<!-- Initialize Libraries -->
<script>
// Toastr Configuration
toastr.options = {
    closeButton: true,
    progressBar: true,
    positionClass: "toast-top-right",
    timeOut: 3000,
    preventDuplicates: true,
    newestOnTop: true
};

// Global AJAX Error Handler
$(document).ajaxError(function(event, jqXHR, settings, error) {
    window.hideAjaxLoader();
    console.error('AJAX Error:', error);
    toastr.error('An error occurred while processing your request');
});

document.addEventListener('DOMContentLoaded', function() {
    // Initialize Bootstrap Components
    $('[data-toggle="tooltip"]').tooltip();
    $('[data-toggle="popover"]').popover();

    // Initialize TinyMCE
    if (document.querySelector('.rich-text-editor')) {
        tinymce.init({
            selector: '.rich-text-editor',
            plugins: 'advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table code help wordcount',
            toolbar: 'undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help',
            height: 300
        });
    }

    // Initialize DataTables Defaults
    if ($.fn.dataTable) {
        $.extend(true, $.fn.dataTable.defaults, {
            responsive: true,
            language: {
                processing: '<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>'
            },
            dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>" +
                 "<'row'<'col-sm-12'tr>>" +
                 "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
            pageLength: 10,
            order: []
        });
    }
});
</script>
